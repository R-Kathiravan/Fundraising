<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fundraising || Campaigns</title>
    <link rel="stylesheet" href="browse-campaigns.css">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=settings_night_sight" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

    <header>
        <div class="menu">
            <div class="logo">
                <a href="index.html"><img src="./assets/stackly-logo1.png"></a>
            </div>
            <nav class="menu-items">
                <a href="index.html">Home</a>
                <a href="about.html">About US</a>
                <a href="browse-campaigns.html">Browse Campaigns</a>
                <a href="404page.html">Start a Fundraiser</a>
                <a href="404page.html">How It Works</a>
                <a href="404page.html">Contact US</a>
                <a href="404page.html" id="login">Login/signup</a>
                <a class="btn-close">Close</a>
            </nav>
            <button class="btn theme-toggle" id="theme-toggle"><span class="material-symbols-outlined">
                    settings_night_sight
                </span></button>
            <div class="hamburger">
                &#9776
            </div>
        </div>
    </header>

    <section class="hero">
        <h1>Browse Campaigns</h1>
        <p>Discover causes that need your support</p>
    </section>
    <section class="campaigns">
        <h1 class="head">Campaigns</h1>
        <div class="controls">
            <input type="text" id="search-input" placeholder="Search campaigns...">
            <div class="sort-and-view">
                <select id="sort-select" class="sort-select">
                    <option value="default">Sort by: Default</option>
                    <option value="newest">Newest</option>
                    <option value="goal-desc">Goal: High to Low</option>
                    <option value="goal-asc">Goal: Low to High</option>
                </select>
                <!-- <div class="view-toggle">
                    <button id="grid-btn" class="active"><i class="fas fa-th-large"></i></button>
                    <button id="list-btn"><i class="fas fa-bars"></i></button>
                </div> -->
            </div>
        </div>
        <div id="campaigns-wrapper" class="campaigns-grid">
        </div>

        <p id="no-results">No campaigns found matching your criteria.</p>

        <div class="pagination">
            <button id="prev-btn">&larr; Previous</button>
            <span id="page-info"></span>
            <button id="next-btn">Next &rarr;</button>
        </div>

        </div>

        <div id="donate-modal" class="modal-overlay">
            <div class="modal-content">
                <span id="modal-close-btn" class="modal-close">&times;</span>
                <h2 id="modal-title">Donate to Campaign</h2>
                <form id="donate-form">
                    <div class="form-group">
                        <label for="amount">Amount (₹)</label>
                        <input type="number" id="amount" placeholder="500" required>
                    </div>
                    <div class="form-group">
                        <label for="name">Full Name</label>
                        <input type="text" id="name" placeholder="Your Name" required>
                    </div>
                    <button type="submit" class="confirm-donation-btn">Confirm Donation</button>
                </form>
            </div>
        </div>
    </section>
    <section class="urgent-campaings">
        <h1 class="head">Urgent Campaigns</h1>
        <div class="campaigns-list">
            <div class="campaign-item">
                <div class="campaign-image">
                    <img src="./assets/campaigns-img1.jpg" alt="${data.category}">
                    <span class="category-badge">Medical</span>
                </div>
                <div class="campaign-content">
                    <h3>Cancer Patient</h3>
                    <p class="organizer">Trust Foundation</p>
                    <p class="description">A Child was Affected by cancer</p>
                    <div class="progress-bar">
                        <div style="width: 50%;"></div>
                    </div>
                    <div class="stats">
                        <div>
                            <p class="raised">2,00,000</p>
                            <p class="goal">raised of ₹1,00,000</p>
                        </div>
                        <p class="donors">200 Doners</p>
                    </div>
                    <button class="donate-btn">Donate Now</button>
                </div>
            </div>
        </div>
        <div class="campaigns-list">
            <div class="campaign-item">
                <div class="campaign-image">
                    <img src="./assets/campaigns-img2.avif" alt="${data.category}">
                    <span class="category-badge">Flood</span>
                </div>
                <div class="campaign-content">
                    <h3>Flood Relief for Assam Villages</h3>
                    <p class="organizer">Health Foundation</p>
                    <p class="description">Families affected by recent floods need immediate food, shelter and
                        medical kits. Support rescue efforts.</p>
                    <div class="progress-bar">
                        <div style="width: 30%;"></div>
                    </div>
                    <div class="stats">
                        <div>
                            <p class="raised">1,50,000</p>
                            <p class="goal">raised of ₹50,000</p>
                        </div>
                        <p class="donors">300 Doners</p>
                    </div>
                    <button class="donate-btn">Donate Now</button>
                </div>
            </div>
        </div>
        <div class="campaigns-list">
            <div class="campaign-item">
                <div class="campaign-image">
                    <img src="./assets/campaigns-img3.webp" alt="${data.category}">
                    <span class="category-badge">Medical</span>
                </div>
                <div class="campaign-content">
                    <h3>Clean Water for 100 Villages</h3>
                    <p class="organizer">Trust Foundation</p>
                    <p class="description">Install handpumps and filtration units to provide safe drinking water to
                        remote villages.</p>
                    <div class="progress-bar">
                        <div style="width: 60%;"></div>
                    </div>
                    <div class="stats">
                        <div>
                            <p class="raised">2,00,000</p>
                            <p class="goal">raised of ₹1,40,000</p>
                        </div>
                        <p class="donors">500 Doners</p>
                    </div>
                    <button class="donate-btn">Donate Now</button>
                </div>
            </div>
        </div>
        <div class="campaigns-list">
            <div class="campaign-item">
                <div class="campaign-image">
                    <img src="./assets/campaigns-img4.jpg" alt="${data.category}">
                    <span class="category-badge">Medical</span>
                </div>
                <div class="campaign-content">
                    <h3>Medical Camp for Senior Citizens</h3>
                    <p class="organizer">Trust Foundation</p>
                    <p class="description">Organize free check-ups, medicines and health awareness camps for elderly
                        people in rural areas.</p>
                    <div class="progress-bar">
                        <div style="width: 25%;"></div>
                    </div>
                    <div class="stats">
                        <div>
                            <p class="raised">1,20,000</p>
                            <p class="goal">raised of ₹3,00,000</p>
                        </div>
                        <p class="donors">234 Doners</p>
                    </div>
                    <button class="donate-btn">Donate Now</button>
                </div>
            </div>
        </div>
    </section>
    <section class="cta">
        <h1>Have a cause to share? Start your own campaign today!</h1>
        <a href="404page.html">Start a Campaign</a>
    </section>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const state = {
                currentPage: 1,
                itemsPerPage: 4,
                allCampaigns: [],
            };

            const campaignsWrapper = document.getElementById('campaigns-wrapper');
            const searchInput = document.getElementById('search-input');
            const sortSelect = document.getElementById('sort-select');
            const noResultsMsg = document.getElementById('no-results');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const pageInfo = document.getElementById('page-info');

            const modal = document.getElementById('donate-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalTitle = document.getElementById('modal-title');
            const donateForm = document.getElementById('donate-form');

            campaignsWrapper.addEventListener('click', function (e) {
                if (e.target.classList.contains('donate-btn')) {
                    const campaignItem = e.target.closest('.campaign-item');
                    const title = campaignItem.querySelector('h3').textContent;
                    modalTitle.textContent = `Donate to "${title}"`;
                    modal.style.display = 'flex';
                    document.body.classList.add('modal-open');
                }
            });

            function closeModal() {
                modal.style.display = 'none';
                document.body.classList.remove('modal-open');
            }
            modalCloseBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) { closeModal(); }
            });
            donateForm.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Thank you for your donation!');
                closeModal();
            });

            const campaignData = [
                { date: "2025-09-22", goal: 100000, raised: 75000, donors: 312, category: 'Health', title: 'Medical Aid for Flood Victims', organizer: 'by Hope Foundation', desc: 'Providing essential medical supplies and support to families affected by the recent floods.', img: 'https://images.unsplash.com/photo-1532629345422-7515f3d16bb6?q=80&w=1170' },
                { date: "2025-08-15", goal: 500000, raised: 200000, donors: 450, category: 'Education', title: 'Build a School in Rural India', organizer: 'by Vidya Initiative', desc: 'Help us construct a safe and modern school for 200 underprivileged children.', img: 'https://images.unsplash.com/photo-1488521787991-ed7b2f28a727?q=80&w=1170' },
                { date: "2025-09-01", goal: 50000, raised: 45000, donors: 820, category: 'Environment', title: 'Plant 10,000 Trees', organizer: 'by Green Earth Org', desc: 'Join our mission to reforest local areas and combat climate change, one tree at a time.', img: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=1274' },
                { date: "2025-07-20", goal: 250000, raised: 137500, donors: 615, category: 'Animals', title: 'Rescue Stray Animals', organizer: 'by Paws & Care', desc: 'Support our shelter in providing food, medical care, and homes for abandoned animals.', img: 'https://images.unsplash.com/photo-1599059813005-11265ba4b4ce?q=80&w=1170' },
                { date: "2025-09-23", goal: 75000, raised: 15000, donors: 95, category: 'Community', title: 'Winter Clothing Drive', organizer: 'by Warm Hearts', desc: 'Help provide warm clothing and blankets to homeless individuals during the cold months.', img: 'https://images.unsplash.com/photo-1576842323221-27a3a2a715f5?q=80&w=1170' },
                { date: "2025-06-10", goal: 300000, raised: 280000, donors: 1200, category: 'Health', title: 'Clean Water Project', organizer: 'by AquaLife', desc: 'Fund the installation of water purification systems in a remote village.', img: 'https://images.unsplash.com/photo-1521791055326-2a38722c81a5?q=80&w=1170' },
                { date: "2025-08-05", goal: 150000, raised: 60000, donors: 250, category: 'Education', title: 'Digital Literacy for Seniors', organizer: 'by TechConnect', desc: 'Empower senior citizens with essential digital skills for todays world.', img: 'https://images.unsplash.com/photo-1543269865-cbf427effbad?q=80&w=1170' }
            ];

            function createCampaignElement(data) {
                const item = document.createElement('div');
                item.className = 'campaign-item';
                item.dataset.date = data.date;
                item.dataset.goal = data.goal;
                const progress = (data.raised / data.goal) * 100;
                item.innerHTML = `
                    <div class="campaign-image">
                        <img src="${data.img}" alt="${data.category}">
                        <span class="category-badge">${data.category}</span>
                    </div>
                    <div class="campaign-content">
                        <h3>${data.title}</h3>
                        <p class="organizer">${data.organizer}</p>
                        <p class="description">${data.desc}</p>
                        <div class="progress-bar"><div style="width: ${progress}%;"></div></div>
                        <div class="stats">
                            <div>
                                <p class="raised">₹${data.raised.toLocaleString('en-IN')}</p>
                                <p class="goal">raised of ₹${data.goal.toLocaleString('en-IN')}</p>
                            </div>
                            <p class="donors">${data.donors} Donors</p>
                        </div>
                        <button class="donate-btn">Donate Now</button>
                    </div>`;
                return item;
            }

            // --- 4. The Main Display Function ---
            function updateDisplay() {
                // 1. Filter by search term
                const searchTerm = searchInput.value.toLowerCase();
                let filteredCampaigns = state.allCampaigns.filter(item => {
                    const title = item.querySelector('h3').textContent.toLowerCase();
                    const desc = item.querySelector('.description').textContent.toLowerCase();
                    return title.includes(searchTerm) || desc.includes(searchTerm);
                });

                // 2. Sort the filtered results
                const sortValue = sortSelect.value;
                filteredCampaigns.sort((a, b) => {
                    switch (sortValue) {
                        case 'newest': return new Date(b.dataset.date) - new Date(a.dataset.date);
                        case 'goal-desc': return parseInt(b.dataset.goal) - parseInt(a.dataset.goal);
                        case 'goal-asc': return parseInt(a.dataset.goal) - parseInt(b.dataset.goal);
                        default: return 0;
                    }
                });

                // 3. Paginate the sorted, filtered results
                const totalPages = Math.ceil(filteredCampaigns.length / state.itemsPerPage);
                const startIndex = (state.currentPage - 1) * state.itemsPerPage;
                const endIndex = startIndex + state.itemsPerPage;
                const paginatedCampaigns = filteredCampaigns.slice(startIndex, endIndex);

                // 4. Render to the DOM
                campaignsWrapper.innerHTML = ''; // Clear previous items
                if (paginatedCampaigns.length > 0) {
                    paginatedCampaigns.forEach(item => campaignsWrapper.appendChild(item));
                    noResultsMsg.style.display = 'none';
                } else {
                    noResultsMsg.style.display = 'block';
                }

                // 5. Update Pagination UI
                pageInfo.textContent = `Page ${state.currentPage} of ${totalPages > 0 ? totalPages : 1}`;
                prevBtn.disabled = state.currentPage === 1;
                nextBtn.disabled = state.currentPage === totalPages || totalPages === 0;
            }

            searchInput.addEventListener('input', () => {
                state.currentPage = 1; // Reset to first page on new search
                updateDisplay();
            });

            sortSelect.addEventListener('change', () => {
                state.currentPage = 1; // Reset to first page on new sort
                updateDisplay();
            });

            prevBtn.addEventListener('click', () => {
                if (state.currentPage > 1) {
                    state.currentPage--;
                    updateDisplay();
                }
            });

            nextBtn.addEventListener('click', () => {
                state.currentPage++; // The updateDisplay function will handle the max page limit
                updateDisplay();
            });

            // --- 6. Initial Load ---
            function initialize() {
                // Create all campaign elements from data and store in master list
                state.allCampaigns = campaignData.map(createCampaignElement);
                // Perform the first render
                updateDisplay();
            }

            initialize();
        });
    </script>













































    <script src="./script.js"></script>
    <script>
        const themeToggle = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;
        function applyTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                htmlElement.classList.add('dark-mode');
            } else {
                htmlElement.classList.remove('dark-mode');
            }
        }

        applyTheme();

        themeToggle.addEventListener('click', () => {
            htmlElement.classList.toggle('dark-mode');

            if (htmlElement.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        });
    </script>
</body>

</html>